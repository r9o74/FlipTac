<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlipTac</title>
    <link rel="stylesheet" href="fliptac_style.css">
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
</head>
<body>
    <main>
        <div id="menu-screen">
            <!-- ▼▼▼ メニュー画面のBGMボタンを追加 ▼▼▼ -->
            <div class="top-controls-menu">
                <button id="bgm-toggle-menu" class="icon-btn">
                    <!-- SVG for speaker icon -->
                    <svg class="speaker-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path><path class="speaker-slash" d="M1 1 L23 23" stroke-width="2" stroke="currentColor" fill="none"></path></svg>
                </button>
            </div>
            <!-- ▲▲▲ ここまで ▲▲▲ -->

            <h1>Flip<span class="small_x"></span>Tac</h1>
            <div class="settings">
                <div class="setting-item">
                    <div id="players-selection-buttons">
                        <button class="player-btn active" data-value="1">vsCPU</button>
                        <button class="player-btn" data-value="2">2p</button>
                        <button class="player-btn" data-value="3">3p</button>
                        <button class="player-btn" data-value="4">4p</button>
                        <button class="player-btn" data-value="5">5p</button>
                    </div>
                </div>
                <div class="setting-item" id="cpu-level-container">
                    <label>CPU Lv.</label>
                    <div id="cpu-selection-buttons">
                        <button class="level-btn active" data-level="1">1</button>
                        <button class="level-btn" data-level="2">2</button>
                        <button class="level-btn" data-level="3">3</button>
                        <button class="level-btn" data-level="4">4</button>
                    </div>
                </div>
                <div class="setting-item">
                    <label for="size-slider">size</label>
                    <input type="range" id="size-slider" value="5" min="3" max="10">
                    <span id="size-display">5x5</span>
                </div>
            </div>
            <button id="start-button">Start</button>
            <button id="show-rules-menu-button" class="rule-button">Rules</button> 
        </div>

        <div id="game-screen" style="display: none;">
            <div class="top-controls-game">
                <button id="return-to-menu-btn" class="icon-btn" title="メニューに戻る">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
                </button>
                <button id="bgm-toggle-game" class="icon-btn" title="BGM オン/オフ">
                    <svg class="speaker-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path><path class="speaker-slash" d="M1 1 L23 23" stroke-width="2" stroke="currentColor" fill="none"></path></svg>
                </button>
                <button id="show-rules-game-button" class="rule-button">Rules</button>
            </div>

            <div class="entire-board">
                <div id="gemini-thinking-indicator" class="hidden">
                    <div class="spinner"></div>
                    <p>Gemini is thinking...</p>
                </div>
                <div id="game-board"></div>
            </div>
          
            <div id="winner-display" style="display: none;">
                <div class="winner-text"></div>
                <div class="winner-options">
                    <button id="replay-button" class="win-btn">Replay</button>
                    <button id="change-settings-button" class="win-btn">Change Settings</button>
                </div>
            </div>
        </div>
    </main>

    <div id="rules-overlay" class="hidden">
        <div class="rules-content">
            <div class="rule-images">
                <img src="fliptac_jpg_0.jpg" alt="ルール1" class="rule-image active-image" data-page="1">
                <img src="fliptac_jpg_1.jpg" alt="ルール2" class="rule-image" data-page="2">
                <img src="fliptac_jpg_2.jpg" alt="ルール3" class="rule-image" data-page="3">
            </div>
            <div class="rule-page-switch">
                <button class="page-btn active-btn" data-page="1">0</button>
                <button class="page-btn" data-page="2">1</button>
                <button class="page-btn" data-page="3">2</button>
            </div>        
            <button id="close-rules-button">Close</button>
        </div>
    </div>
    
    <script src="fliptac_script.js" defer></script>
</body>
</html>

